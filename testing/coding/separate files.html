<!DOCTYPE html>
<html>
<head>
	
</head>
<body>
	<canvas id="c"></canvas>
	<script src="mylibrary2.js"></script>
	
	<script>
	
		var canvas = document.getElementById("c");
		var context = canvas.getContext("2d");
	
		var test = new Test();
		
		var startEvent = new Event('start');

		test.userStuff = `
			//this is the circle file that the user would write
			console.log(this);
			function start() {
				console.log(this);
				test.x = 100;
				test.y = 100;
				test.radius = 30;
				test.draw = function() {
					context.arc(test.x, test.y, test.radius, 0, 2*Math.PI);
					context.fill();
				};
			}
			
			function update() {
				
			}
			
			function alert() {
				console.log("bleh");
			}
			start();
		`;
		
		
		/*test.userStuff = `
			//this is the circle file that the user would write
			console.log(test);
			x = 100;
			y = 100;
			radius = 30;

		`;*/
		console.log(JSON.parse(test.userStuff));
		var lol = (new Function(test.userStuff + '//# sourceURL=lecode')).bind(test);
		//console.log(test);
		document.addEventListener('start', function() {
			//lol();
		});
		//test.run(test.userStuff);
		//console.log(test);
		document.dispatchEvent(startEvent);
	</script>

</body>
</html>